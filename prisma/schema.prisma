generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model databasechangelog {
  id            String   @db.VarChar(255)
  author        String   @db.VarChar(255)
  filename      String   @db.VarChar(255)
  dateexecuted  DateTime @db.Timestamp(6)
  orderexecuted Int
  exectype      String   @db.VarChar(10)
  md5sum        String?  @db.VarChar(35)
  description   String?  @db.VarChar(255)
  comments      String?  @db.VarChar(255)
  tag           String?  @db.VarChar(255)
  liquibase     String?  @db.VarChar(20)
  contexts      String?  @db.VarChar(255)
  labels        String?  @db.VarChar(255)
  deployment_id String?  @db.VarChar(10)

  @@ignore
}

model databasechangeloglock {
  id          Int       @id
  locked      Boolean
  lockgranted DateTime? @db.Timestamp(6)
  lockedby    String?   @db.VarChar(255)
}

model old_passwords {
  id                       BigInt    @id @default(autoincrement())
  encrypted_password       String    @db.VarChar(255)
  password_archivable_type String    @db.VarChar(255)
  password_archivable_id   Int
  created_at               DateTime? @db.Timestamp(6)

  @@index([password_archivable_type, password_archivable_id], map: "index_password_archivableddu")
}

model pafs_core_areas {
  id                   BigInt                 @id @default(autoincrement())
  name                 String?                @db.VarChar(255)
  parent_id            Int?
  area_type            String?                @db.VarChar(255)
  created_at           DateTime               @db.Timestamp(6)
  updated_at           DateTime               @db.Timestamp(6)
  sub_type             String?                @db.VarChar(255)
  identifier           String?                @db.VarChar(255)
  end_date             DateTime?              @db.Date
  pafs_core_user_areas pafs_core_user_areas[]

  @@index([name], map: "index_pafs_core_areas_on_name")
}

model pafs_core_user_areas {
  id              BigInt          @id @default(autoincrement())
  created_at      DateTime        @db.Timestamp(6)
  updated_at      DateTime        @db.Timestamp(6)
  user_id         BigInt
  area_id         BigInt
  primary         Boolean?        @default(false)
  pafs_core_areas pafs_core_areas @relation(fields: [area_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user_areas_area_id")
  pafs_core_users pafs_core_users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user_areas_user_id")

  @@index([area_id], map: "index_pafs_core_user_areas_on_area_id")
  @@index([user_id], map: "index_pafs_core_user_areas_on_user_id")
}

model pafs_core_users {
  id                     BigInt                 @id @default(autoincrement())
  email                  String                 @unique(map: "index_pafs_core_users_on_email") @default("") @db.VarChar(255)
  encrypted_password     String                 @default("") @db.VarChar(255)
  reset_password_token   String?                @unique(map: "index_pafs_core_users_on_reset_password_token") @db.VarChar(255)
  reset_password_sent_at DateTime?              @db.Timestamp(6)
  remember_created_at    DateTime?              @db.Timestamp(6)
  sign_in_count          Int                    @default(0)
  current_sign_in_at     DateTime?              @db.Timestamp(6)
  last_sign_in_at        DateTime?              @db.Timestamp(6)
  current_sign_in_ip     String?                @db.Inet
  last_sign_in_ip        String?                @db.Inet
  failed_attempts        Int                    @default(0)
  unlock_token           String?                @unique(map: "index_pafs_core_users_on_unlock_token") @db.VarChar(255)
  locked_at              DateTime?              @db.Timestamp(6)
  first_name             String                 @default("") @db.VarChar(255)
  last_name              String                 @default("") @db.VarChar(255)
  job_title              String?                @db.VarChar(255)
  created_at             DateTime               @db.Timestamp(6)
  updated_at             DateTime               @db.Timestamp(6)
  invitation_token       String?                @unique(map: "index_pafs_core_users_on_invitation_token") @db.VarChar(255)
  invitation_created_at  DateTime?              @db.Timestamp(6)
  invitation_sent_at     DateTime?              @db.Timestamp(6)
  invitation_accepted_at DateTime?              @db.Timestamp(6)
  invitation_limit       Int?
  invited_by_id          Int?
  invited_by_type        String?                @db.VarChar(255)
  invitations_count      Int?                   @default(0)
  admin                  Boolean                @default(false)
  disabled               Boolean                @default(false)
  unique_session_id      String?                @db.VarChar(20)
  organisation           String                 @default("") @db.VarChar(255)
  telephone_number       String?                @db.VarChar(255)
  status                 String                 @default("") @db.VarChar(255)
  pafs_core_user_areas   pafs_core_user_areas[]

  @@index([disabled], map: "index_pafs_core_users_on_disabled")
  @@index([invitations_count], map: "index_pafs_core_users_on_invitations_count")
  @@index([invited_by_id], map: "index_pafs_core_users_on_invited_by_id")
}

model pafs_core_projects {
  id                                BigInt                           @id @default(autoincrement())
  reference_number                  String                           @db.VarChar(255)
  version                           Int
  name                              String?                          @db.VarChar(255)
  project_type                      String?                          @db.VarChar(255)
  project_location                  String[]
  project_location_zoom_level       Int?
  grid_reference                    String?                          @db.VarChar(255)
  region                            String?                          @db.VarChar(255)
  parliamentary_constituency        String?                          @db.VarChar(255)
  county                            String?                          @db.VarChar(255)
  benefit_area                      String?
  benefit_area_centre               String[]
  benefit_area_zoom_level           Int?
  benefit_area_file_name            String?                          @db.VarChar(255)
  benefit_area_content_type         String?                          @db.VarChar(255)
  benefit_area_file_size            Int?
  benefit_area_file_updated_at      DateTime?                        @db.Timestamp(6)
  start_outline_business_case_month Int?
  start_outline_business_case_year  Int?
  award_contract_month              Int?
  award_contract_year               Int?
  start_construction_month          Int?
  start_construction_year           Int?
  ready_for_service_month           Int?
  ready_for_service_year            Int?
  created_at                        DateTime                         @db.Timestamp(6)
  updated_at                        DateTime                         @db.Timestamp(6)
  pafs_core_nfm_land_use_changes    pafs_core_nfm_land_use_changes[]
  pafs_core_nfm_measures            pafs_core_nfm_measures[]

  @@index([reference_number], map: "index_pafs_core_projects_on_reference_number")
}

model pafs_core_area_downloads {
  id                                  BigInt    @id @default(autoincrement())
  area_id                             Int?
  user_id                             Int?
  requested_on                        DateTime? @db.Timestamp(6)
  number_of_proposals                 Int?
  fcerm1_filename                     String?   @db.VarChar(255)
  benefit_areas_filename              String?   @db.VarChar(255)
  moderation_filename                 String?   @db.VarChar(255)
  number_of_proposals_with_moderation Int?
  status                              String    @default("empty") @db.VarChar(255)
  funding_calculator_filename         String?   @db.VarChar(255)
  created_at                          DateTime? @db.Timestamp(6)
  updated_at                          DateTime? @db.Timestamp(6)

  @@index([area_id], map: "index_pafs_core_area_downloads_on_area_id")
}

model pafs_core_area_projects {
  id         BigInt   @id @default(autoincrement())
  area_id    Int
  project_id Int
  owner      Boolean? @default(false)
  created_at DateTime @db.Timestamp(6)
  updated_at DateTime @db.Timestamp(6)

  @@index([area_id], map: "index_pafs_core_area_projects_on_area_id")
  @@index([project_id], map: "index_pafs_core_area_projects_on_project_id")
}

model pafs_core_asite_files {
  id                  BigInt @id @default(autoincrement())
  asite_submission_id Int?
  filename            String @db.VarChar(255)
  checksum            String @db.VarChar(255)
}

model pafs_core_asite_submissions {
  id                       BigInt    @id @default(autoincrement())
  project_id               Int?
  email_sent_at            DateTime  @db.Timestamp(6)
  confirmation_received_at DateTime? @db.Timestamp(6)
  status                   String    @default("created") @db.VarChar(255)
}

model pafs_core_funding_contributors {
  id               BigInt   @id @default(autoincrement())
  name             String?  @db.VarChar(255)
  contributor_type String?  @db.VarChar(255)
  funding_value_id Int?
  amount           BigInt?
  secured          Boolean  @default(false)
  constrained      Boolean  @default(false)
  created_at       DateTime @db.Timestamp(6)
  updated_at       DateTime @db.Timestamp(6)

  @@index([funding_value_id, contributor_type], map: "funding_contributors_on_funding_value_id_and_type")
  @@index([contributor_type], map: "index_pafs_core_funding_contributors_on_contributor_type")
  @@index([funding_value_id], map: "index_pafs_core_funding_contributors_on_funding_value_id")
}

model pafs_core_funding_values {
  id                             BigInt  @id @default(autoincrement())
  project_id                     Int?
  financial_year                 Int
  fcerm_gia                      BigInt?
  local_levy                     BigInt?
  internal_drainage_boards       BigInt?
  public_contributions           BigInt?
  private_contributions          BigInt?
  other_ea_contributions         BigInt?
  not_yet_identified             BigInt?
  total                          BigInt  @default(0)
  asset_replacement_allowance    BigInt?
  environment_statutory_funding  BigInt?
  frequently_flooded_communities BigInt?
  other_additional_grant_in_aid  BigInt?
  other_government_department    BigInt?
  recovery                       BigInt?
  summer_economic_fund           BigInt?

  @@index([project_id, financial_year], map: "funding_values_on_project_id_and_financial_year")
  @@index([financial_year], map: "index_pafs_core_funding_values_on_financial_year")
  @@index([project_id], map: "index_pafs_core_funding_values_on_project_id")
}

model pafs_core_nfm_land_use_changes {
  id                   BigInt             @id @default(autoincrement())
  project_id           BigInt
  land_use_type        String             @db.VarChar(50)
  area_before_hectares Float
  area_after_hectares  Float
  created_at           DateTime           @db.Timestamp(6)
  updated_at           DateTime           @db.Timestamp(6)
  pafs_core_projects   pafs_core_projects @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_nfm_land_use_project")

  @@unique([project_id, land_use_type], map: "idx_nfm_land_use_unique")
  @@index([project_id], map: "idx_nfm_land_use_project_id")
}

model pafs_core_nfm_measures {
  id                 BigInt             @id @default(autoincrement())
  project_id         BigInt
  measure_type       String             @db.VarChar(100)
  area_hectares      Float?
  storage_volume_m3  Float?
  length_km          Float?
  width_m            Float?
  created_at         DateTime           @db.Timestamp(6)
  updated_at         DateTime           @db.Timestamp(6)
  pafs_core_projects pafs_core_projects @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_nfm_measures_project")

  @@index([project_id], map: "idx_nfm_measures_project_id")
  @@index([measure_type], map: "idx_nfm_measures_type")
}

model pafs_core_reference_counters {
  id           BigInt   @id @default(autoincrement())
  rfcc_code    String   @unique(map: "index_pafs_core_reference_counters_on_rfcc_code") @default("") @db.VarChar(255)
  high_counter Int      @default(0)
  low_counter  Int      @default(0)
  created_at   DateTime @db.Timestamp(6)
  updated_at   DateTime @db.Timestamp(6)
}

model pafs_core_states {
  id         BigInt    @id @default(autoincrement())
  project_id Int?
  state      String    @default("draft") @db.VarChar(255)
  created_at DateTime? @db.Timestamp(6)
  updated_at DateTime? @db.Timestamp(6)
}
