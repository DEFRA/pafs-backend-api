<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

  <changeSet id="5-005-add-unique-constraint-area-projects-project-id" author="migration-team">
    <comment>Add unique constraint on project_id in pafs_core_area_projects table to ensure one area per project</comment>

    <addUniqueConstraint 
      tableName="pafs_core_area_projects" 
      columnNames="project_id" 
      constraintName="unique_pafs_core_area_projects_project_id"/>

    <rollback>
      <dropUniqueConstraint 
        tableName="pafs_core_area_projects" 
        constraintName="unique_pafs_core_area_projects_project_id"/>
    </rollback>
  </changeSet>

</databaseChangeLog>
